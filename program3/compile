#!/bin/bash
STD="-std=gnu11"
DBGSYM="-Og -ggdb3"
WFLAGS="-Wall -pedantic -Wno-missing-braces"
DFLAG="-DDEBUG=1"
echo "\$1: $1"
if [[ "$1" = DEBUG ]] 
then
	echo "DEBUG profile"
elif [[ "$1" = GDB ]] 
then
	echo "GBD profile"
	DFLAG=""
	echo "DFLAG: $DFLAG"
elif [[ "$1" == PROD ]] 
then 
	echo "PROD profile"
	DFLAG=""
	echo "DFLAG: $DFLAG"
	DBGSYM=""
fi
rm -f ./*.o
rm -f ./smallsh 
echo "Values--STD: $STD; DFLAG: $DFLAG; DBGSYM: $DBGSYM"
gcc $STD $WFLAGS $DBGSYM -I. $DFLAG -c cmdstruct.c
gcc $STD $WFLAGS $DBGSYM -I. $DFLAG -c smshbuiltin.c
gcc $STD $WFLAGS $DBGSYM -I. $DFLAG -c smshchild.c
gcc $STD $WFLAGS $DBGSYM -I. $DFLAG -c smshregex.c
gcc $STD $WFLAGS $DBGSYM -I. $DFLAG -c smshsignals.c
echo "gcc $STD $WFLAGS $DBGSYM -I. $DFLAG -o smallsh ./smshchild.o ./smshsignals.o ./smshbuiltin.o
./smshregex.o ./cmdstruct.o ./smallsh.c"
gcc $STD $WFLAGS $DBGSYM -I. $DFLAG -o smallsh ./smshchild.o ./smshsignals.o ./smshbuiltin.o ./smshregex.o ./cmdstruct.o ./smallsh.c

